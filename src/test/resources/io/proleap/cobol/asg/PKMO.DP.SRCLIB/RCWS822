      ****************************************************************          
      * RCWS822                                      LRECL = 17,769  *          
      *                                                              *          
      *      NEW COMMAREA FOR OTR                                    *          
      *                                                              *          
      * REVISED: 04/09/2003  -  RICH MOORE                           *          
      ****************************************************************          
                                                                                
       01  RC822-COMMAREA.                                                      
                                                                                
           05  RC822-KEYS.                                                      
                                                                                
               10  RC822-PO-NBR             PIC S9(09) COMP VALUE +0.           
               10  RC822-APP-PO-LNE-NBR     PIC S9(09) COMP VALUE +0.           
               10  RC822-REC-SEQ-NBR        PIC S9(09) COMP VALUE +0.           
               10  RC822-PO-PREPK-ID        PIC S9(04) COMP VALUE +0.           
               10  RC822-OPER-UNT-ID        PIC S9(04) COMP VALUE +0.           
               10  RC822-FCLTY-ID           PIC S9(04) COMP VALUE +0.           
               10  RC822-STR-NBR            PIC S9(04) COMP VALUE +0.           
               10  RC822-PKGNG-CDE          PIC  X(01) VALUE SPACE.             
                   88  RC822-BULK-PACKAGE        VALUE 'B' 'C' 'S'.             
                   88  RC822-PREPACK-PACKAGE     VALUE 'I' 'M'.                 
                                                                                
      *****************************************************************         
      ** RC822-OTR-TYPE DETERMINES THE LEVEL OF DETAIL TO BE PROCESSED.         
      ** IF STORE-LEVEL-OTR IS REQUESTED, THEN ONE LINE AND ALL THE             
      ** STORE'S OTR DATA IS RETURNED.  LINE-LEVEL-OTR WILL DETERMINE           
      ** OTR INFORMATION AT A LINE SUMMARY LEVEL. LINE LEVEL TOTALS             
      ** ONLY INCLUDE THE REQUESTED LINES.                                      
      *****************************************************************         
                                                                                
           05  RC822-PROCESSING-FLAGS.                                          
               10  RC822-OTR-TYPE                PIC X.                         
                   88  RC822-STORE-LEVEL-OTR     VALUE 'S'.                     
                   88  RC822-LINE-LEVEL-OTR      VALUE 'L'.                     
                                                                                
      *****************************************************************         
      ** RC822-OTR-SCOPE DETERMINES THE SCOPE OF DETERMINING OTR.               
      ** RECEIVER-OTR WILL ONLY PROCESS PREVIOUS OR VERIFIED RECEIVERS          
      ** TO THE CURRENT RECEIVER.  WHEREAS PO-OTR PROCESSES ALL THE             
      ** RECEIVERS.                                                             
      *****************************************************************         
                                                                                
               10  RC822-OTR-SCOPE                PIC X.                        
                   88  RC822-RECEIVER-OTR         VALUE 'R'.                    
                   88  RC822-PO-OTR               VALUE 'P'.                    
                                                                                
      *****************************************************************         
      ** RC822-PACK-COMPONENTS IS FILLED OUT FOR STORE OTR CALC       *         
      ** THEY ARE NEEDED TO VALIDATE MESTDS PLAN FOR A PACK PO.       *         
      *****************************************************************         
                                                                                
               10  RC822-PACK-COMPONENTS  OCCURS 100 TIMES                      
                                          INDEXED BY RC822-PACK-IDX.            
                   15  RC822-PO-LINE-NBR         PIC S9(09) COMP.               
                   15  RC822-APP-PO-LINE-NBR     PIC S9(09) COMP.               
                   15  RC822-PO-SKU-NBR          PIC S9(08)V COMP-3.            
                   15  RC822-PO-PACK-RATO-QTY    PIC S9(04) COMP.               
                                                                                
      *****************************************************************         
      ** RETURN DATA FIELDS ARE BUILT WITHIN THE OTR ROUTINE AND      *         
      ** PASSED BACK TO THE CALLING ROUTINE.                          *         
      *****************************************************************         
                                                                                
           05  RC822-RETURN-DATA-FIELDS.                                        
               10  RC822-PLAN-NBR                PIC S9(04)  COMP.              
               10  RC822-CURR-SPLIT-QTY          PIC S9(09)  COMP.              
               10  RC822-CURR-SPLIT-PK           PIC S9(09)  COMP.              
               10  RC822-PK-SIZE-RND-CDE         PIC  X(01).                    
               10  RC822-ALLOC-OUTR-PK-QTY       PIC S9(09)  COMP.              
               10  RC822-SUM-STR-PLAN-QTY        PIC S9(09)  COMP.              
               10  RC822-SUM-STR-PLAN-PK         PIC S9(09)  COMP.              
               10  RC822-SUM-STR-OTR-QTY         PIC S9(09)  COMP.              
               10  RC822-SUM-STR-OTR-PK          PIC S9(09)  COMP.              
               10  RC822-OVER-PRORATE-CDE        PIC  X(01).                    
               10  RC822-SHORT-PRORATE-CDE       PIC  X(01).                    
               10  RC822-USE-EX-RULES-IND        PIC  X(01).                    
               10  RC822-STORE-VAL-OOR-IND       PIC  X(01).                    
               10  RC822-STORE-GOOD-PLAN-IND     PIC  X(01).                    
                                                                                
      ******************************************************************        
      ** RC822-LINE-TABLE IS A COPY OF ALL THE LINES IN A PACK.  IT WILL        
      ** CONTAIN THE LINE DISTRIBUTION FOR THE ENTIRE LINE AND THE              
      ** OPEN TO RECEIVE BY LINE. ONLY THE LINES IN THE PREPK-ID WILL           
      ** EVER BE RETRIEVED.                                                     
      ******************************************************************        
                                                                                
           05  RC822-TABLE.                                                     
               10  RC822-LINE-WORK-AREA OCCURS 100 TIMES                        
                                        INDEXED BY RC822-ITEM-IDX               
                                                   RC822-ITEM-ERR-IDX.          
                   15  RC822-LINE-NBR            PIC S9(09) COMP.               
                   15  RC822-LINE-DISTRO-QTY     PIC S9(09) COMP-3.             
                   15  RC822-LINE-DISTRO-QTY-X   PIC  X(05).                    
                   15  RC822-LINE-OTR-QTY        PIC S9(09) COMP-3.             
                   15  RC822-LINE-OTR-QTY-X      PIC  X(05).                    
                   15  RC822-LINE-DISTRO-OTR     PIC S9(09) COMP-3.             
                   15  RC822-LINE-DISTRO-OTR-X   PIC  X(05).                    
                                                                                
               10  RC822-STORE-WORK-AREA OCCURS 200 TIMES                       
                                         INDEXED BY RC822-STORE-IDX             
                                                    RC822-STORE-ERR-IDX.        
                   15  RC822-STORE-NBR             PIC S9(04) COMP.             
                   15  RC822-STORE-DISTRO-QTY      PIC S9(09) COMP-3.           
                   15  RC822-STORE-DISTRO-QTY-X    PIC  X(05).                  
                   15  RC822-STORE-DISTRO-PK       PIC S9(09) COMP-3.           
                   15  RC822-STORE-DISTRO-PK-X     PIC  X(05).                  
                   15  RC822-STORE-OTR-QTY         PIC S9(09) COMP-3.           
                   15  RC822-STORE-OTR-QTY-X       PIC  X(05).                  
                   15  RC822-STORE-OTR-PK          PIC S9(09) COMP-3.           
                   15  RC822-STORE-OTR-PK-X        PIC  X(05).                  
                   15  RC822-STORE-DISTRO-OTR      PIC S9(09) COMP-3.           
                   15  RC822-STORE-DISTRO-OTR-X    PIC  X(05).                  
                   15  RC822-STORE-DISTRO-OTR-PK   PIC S9(09) COMP-3.           
                   15  RC822-STORE-DISTRO-OTR-PK-X PIC  X(05).                  
                   15  RC822-STORE-RNK-SEQ-NBR     PIC S9(04) COMP.             
      *****************************************************************         
      ** RC822-RETURN-DATA PROVIDES A MECHANISM FOR PASSING                     
      ** PROCESSING OR DB2 ERRORS BACK TO THE CALLING PROGRAM.                  
      ** THE CALLING PROGRAM MUST HANDLE THE ERROR PROCESSING.                  
      *****************************************************************         
           05  RC822-RETURN-DATA.                                               
               10  RC822-RETURN-CODE             PIC 9(03).                     
               10  RC822-ABEND-ACTION-IND        PIC X(01).                     
                   88  RC822-NO-DISTRO              VALUE 'D'.                  
                   88  RC822-INVALID-DISTRO         VALUE 'I'.                  
                   88  RC822-CROAK                  VALUE 'C'.                  
                   88  RC822-SOFT-ABORT             VALUE 'S'.                  
               10  RC822-SEVERITY-IND            PIC X(01).                     
                   88  RC822-FATAL-ERROR            VALUE 'F'.                  
                   88  RC822-WARNING-ERROR          VALUE 'W'.                  
               10  RC822-MSG-NUMBER              PIC 9(05).                     
