00001 *----------------------------------------------------------------*02/23/94
00002 *                         PCWS020                                *PCWS020 
00003 *                                                                *   LV010
00004 *   THIS IS THE WS  STATEMENTS NEEDED TO CALCULATE THE 'OPEN TO  *   CL**4
00005 *   RECEIVE'.                                                    *PCWS020 
00006 *                                                                *PCWS020 
00007 *----------------------------------------------------------------*PCWS020 
00008 *                                                                 PCWS020 
00009  01  PC020-OTR-QUANTITY-FIELDS.                                      CL*10
00010      05  PC020-OTR-SUM-QTY                PIC S9(09) COMP.           CL*10
00011      05  PC020-OTR-QUANTITY               PIC S9(09) COMP.           CL*10
00012      05  PC020-OTR-SUM-VITEM-QTY          PIC S9(09) COMP.           CL*10
00013      05  PC020-OTR-INPR-QTY               PIC S9(09) COMP.           CL*10
00014      05  PC020-OTR-INPROCESS-QTY          PIC S9(09) COMP.           CL*10
00015  01  PC020-INDICATORS.                                               CL*10
00016      15  PC020-ITEMS-LEFT-INDICATOR       PIC  X(01).                CL*10
00017          88  PC020-ITEMS-LEFT-ON-DB            VALUE 'Y'.            CL*10
00018          88  PC020-NO-ITEMS-LEFT-ON-DB         VALUE 'N'.            CL*10
00019  01  PC020-COUNT-FIELDS.                                             CL*10
00020      05  PC020-READ-COUNT               PIC S9(09)  VALUE +0         CL*10
00021                                                     COMP-3.          CL**6
00022 *----------------------------------------------------------------*PCWS020 
00023 *    DB2 AREA FOR THE PURCHASE ORDER ITEM TABLE                  *PCWS020 
00024 *----------------------------------------------------------------*PCWS020 
00025      EXEC SQL                                                     PCWS020 
00026           INCLUDE TPURITM                                         PCWS020 
00027      END-EXEC.                                                    PCWS020 
00028 *                                                                 PCWS020 
00029 *----------------------------------------------------------------*PCWS020 
00030 *    DB2 AREA FOR THE TRECDIS TABLE                              *PCWS020 
00031 *----------------------------------------------------------------*PCWS020 
00032      EXEC SQL                                                     PCWS020 
00033           INCLUDE TRECDIS                                         PCWS020 
00034      END-EXEC.                                                    PCWS020 
00035 *                                                                 PCWS020 
00036 *----------------------------------------------------------------*PCWS020 
00037 *    DB2 AREA FOR THE RECEIPT ITEM TABLE                         *PCWS020 
00038 *----------------------------------------------------------------*PCWS020 
00039      EXEC SQL                                                     PCWS020 
00040           INCLUDE TRECITM                                         PCWS020 
00041      END-EXEC.                                                    PCWS020 
00042                                                                   PCWS020 
00043 *---------------------------------------------------------------* PCWS020 
00044 *  CURSOR TO LIST TRECITM                                       * PCWS020 
00045 *---------------------------------------------------------------* PCWS020 
00046                                                                   PCWS020 
00047      EXEC SQL                                                     PCWS020 
00048           DECLARE TRECITM_CSR CURSOR FOR                          PCWS020 
00049            SELECT DTL_CK_ITM_QTY                                  PCWS020 
00050                  ,PKSL_ITM_QTY                                    PCWS020 
00051            FROM   TRECITM                                         PCWS020 
00052            WHERE  ORD_NBR        = :DK-ORD-NBR                    PCWS020 
00053              AND  ORD_LNE_NBR    = :DK-LINE-NBR                   PCWS020 
00054              AND  OPER_UNT_ID    = :DK-OPR-ID                        CL**9
00055              AND  FCLTY_ID       = :DK-FACT                          CL**9
00056              AND  VER_STATUS_CDE = 'A'                            PCWS020 
00057              AND  STATUS_CDE    ^=  'CM'                             CL**3
00058      END-EXEC.                                                    PCWS020 
00059                                                                   PCWS020 
