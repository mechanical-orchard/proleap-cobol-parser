000100**************************************************************    00010001
000200*    ******                IMPORTANT                 ******  *    00020001
000300*   THIS IS THE COMMUNICATION AREA TO BE USED BY A CALLING   *    00030001
000400*   PROGRAM THAT WILL USE ROUTINE DLKUP001 TO ACCESS         *    00040001
000500*   THE NEXT SEQUENCE NUMBER TO BE ASSIGNED TO AN            *    00050001
000600*   ASSIGNMENT FOR THE DLX LABOR SYSTEM.                     *    00060001
000700*                                                            *    00070001
000800*   WHEN THE PROGRAM CHANGES IT MUST BE COMPILED FOR         *    00080001
000900*   BOTH BATCH AND CICS                                      *    00090001
001000*                                                            *    00100001
001100*   TO INVOKE THIS PROGRAM FROM A CICS EXIT YOU MUST USE THIS*    00110001
001200*   FORMAT:                                                  *    00120001
001300*     CALL DL001-USER-PGM USING DFHEIBLK                     *    00130001
001400*                              DL001-COMMAREA                *    00140001
001500*                              DL001-USER-COMMAREA           *    00150001
001600*   IN BATCH DO THIS:                                        *    00160001
001700*     CALL DL001-USER-PGM USING DL001-USER-COMMAREA          *    00170001
001800*    ******                IMPORTANT                 ******  *    00180001
001900*                                                            *    00190001
002000*     INITIALIZE DL001-USER-COMMAREA BEFORE CALLING DLKUP001 *    00200001
002100*                                                            *    00210001
002200*     DL001-ACCESS-METHODD IS REQUIRED.                      *    00220001
002300*                                                            *    00230001
002400*     THE APPROPRIATE DL001-KEYS FIELDS ARE REQUIRED.        *    00240001
002500*     MUST ALSO SUPPLY THE NUMBER OF SEQUENCE NUMBERS        *    00250002
002600*     NEED IN THE DL001-NBR-OF-NBRS-NEED-QTY FIELD.          *    00260002
002700*                                                            *    00270002
002800*     REGARDING DL001-OUTPUT-FIELDS:                         *    00280001
002900*       DL001-ASGMT-FOUND-CODE IS ALWAYS RETURNED.           *    00290001
003000*       DL001-NEXT-SEQ-NBR IS ALWAYS RETURNED (WILL          *    00300001
003100*       CONTAIN ZEROS IF NO NUMBER WAS RETRIEVED)            *    00310002
003200*       DL001-SEQ-START-NBR AND DL001-SEQ-END-NBR            *    00320002
003300*       FIELDS ARE ALWAYS RETURNED (BOTH NUMBERS WILL        *    00330002
003400*       CONTAIN ZEROS IF NO NUMBERS WERE RETRIEVED).         *    00340002
003500*                                                            *    00350001
003600*     NOTE: IF FIELD(S) ARE ADDED TO THIS COPYBOOK           *    00360001
003700*           DECREMENT THE FILLER NEAR THE END OF THIS        *    00370001
003800*           COPYBOOK SO THE TOTAL LENGTH REMAINS THE SAME    *    00380001
003900*           AT LENGTH OF 550                                 *    00390004
004000**************************************************************    00400001
004100 01  DL001-ASGMT-COMMAREA.                                        00410001
004200     05  DL001-ACCESS-METHOD          PIC  X(04).                 00420001
004300         88  DL001-BY-ASGMT-KEY           VALUE 'AKEY'.           00430001
004400     05  DL001-FILLER                 PIC  X(20).                 00440011
004500     05  DL001-KEYS.                                              00450001
004600         10  DL001-KEY-START-DTE.                                 00460001
004700             15  DL001-KEY-SDTE-YYYY  PIC  X(04).                 00470001
004800             15  DL001-FILLER         PIC  X(01).                 00480011
004900             15  DL001-KEY-SDTE-MM    PIC  X(02).                 00490001
005000             15  DL001-FILLER         PIC  X(01).                 00500011
005100             15  DL001-KEY-SDTE-DD    PIC  X(02).                 00510001
005200         10  DL001-KEY-NBR-TXT        PIC  X(10).                 00520001
005300         10  DL001-KEY-NBR-SEQ-NBR    PIC S9(09)     COMP.        00530002
005400         10  DL001-FILLER             PIC  X(50).                 00540011
005500     05  DL001-NBR-OF-NBRS-NEED-QTY   PIC S9(09)     COMP.        00550002
005600         88  DL001-NBRS-NEED-QTY-EMPTY    VALUE ZEROS.            00560003
005700     05  DL001-COMMIT-CDE             PIC  X(01).                 00570002
005800         88  DL001-COMMIT-UPDATE          VALUE 'C'.              00580001
005900         88  DL001-DO-NOT-COMMIT-UPDATE   VALUE 'N'.              00590001
006000     05  DL001-NEXT-ASGMT-PRCS-CDE    PIC  X(01).                 00600004
006100         88  DL001-FIND-NEXT-ASGMT        VALUE 'Y'.              00610004
006200         88  DL001-DO-NOT-FIND-NEXT-ASGMT VALUE 'N'.              00620004
006300     05  DL001-RETURN-CODE            PIC  X(02).                 00630001
006400         88  DL001-SUCCESSFUL             VALUES ZERO.            00640001
006500         88  DL001-SQL-ERROR              VALUE '01'.             00650001
006600         88  DL001-ASGMT-CLOSED-RETURN    VALUE '02'.             00660007
006700         88  DL001-NBR-NEED-QTY-0         VALUE '03'.             00670003
006800         88  DL001-KEY-FIELDS-MISSING     VALUE '04'.             00680004
006900         88  DL001-COMMIT-CODE-INVALID    VALUE '05'.             00690009
007000         88  DL001-FIND-ASGMT-INVALID     VALUE '06'.             00700010
007100         88  DL001-CALLED-MODULE-FAILURE  VALUE '98'.             00710012
007200         88  DL001-INVALID-ACCESS         VALUE '99'.             00720001
007300     05  DL001-RETURN-SQLCODES.                                   00730001
007400         10  DL001-ASGMT-SQLCODE      PIC  S9(9).                 00740001
007500             88  DL001-SQL-NOT-FOUND      VALUE  +100.            00750008
007600             88  DL001-SQL-CONTENTION     VALUES -904 -911 -913.  00760008
007700         10  DL001-FILLER             PIC  X(32).                 00770011
007800* THE FOLLOWING FIELD SHOULD CONTAIN THE ORIGINAL CALLING         00780012
007900* PROGRAM ASSOCIATED TO THE PROCESSING TO BE DONE.                00790012
008000     05  DL001-ORIG-CALLING-PGM-NM    PIC  X(08).                 00800012
008100     05  DL001-FILLER                 PIC  X(17).                 00810014
008200* THE FOLLOWING ARE TO CONTAIN PARAGRAPH NUMBERS ASSOCIATED TO    00820001
008300* THE ABOVE SQL RETURN CODES.                                     00830001
008400     05  DL001-SQL-ERROR-PARA         PIC  X(05).                 00840015
008500     05  DL001-CALL-MOD-FAIL-NM       PIC  X(08).                 00850012
008600     05  DL001-CALL-MOD-FAIL-ERR-CDE  PIC  X(02).                 00860012
008700     05  DL001-FILLER                 PIC  X(10).                 00870012
008800                                                                  00880001
008900     05  DL001-OUTPUT-FIELDS.                                     00890001
009000         10  DL001-ASGMT-FOUND-CODE   PIC  X(1).                  00900001
009100             88  DL001-ASGMT-NOT-FOUND    VALUE 'N'.              00910001
009200             88  DL001-ASGMT-CLOSED       VALUE 'C'.              00920001
009300             88  DL001-ASGMT-FOUND        VALUE 'F'.              00930013
009400             88  DL001-ASGMT-NEXT-USED    VALUE 'U'.              00940004
009500         10  DL001-SEQ-START-NBR      PIC  S9(09)    COMP.        00950002
009600             88  DL001-NO-SEQ-NBR         VALUE ZEROS.            00960001
009700         10  DL001-SEQ-END-NBR        PIC  S9(09)    COMP.        00970002
009800         10  DL001-NXT-START-DTE.                                 00980004
009900             15  DL001-NXT-SDTE-YYYY  PIC  X(04).                 00990004
010000             15  DL001-FILLER         PIC  X(01).                 01000011
010100             15  DL001-NXT-SDTE-MM    PIC  X(02).                 01010004
010200             15  DL001-FILLER         PIC  X(01).                 01020011
010300             15  DL001-NXT-SDTE-DD    PIC  X(02).                 01030004
010400         10  DL001-NXT-NBR-TXT        PIC  X(10).                 01040004
010500         10  DL001-NXT-NBR-SEQ-NBR    PIC S9(09)     COMP.        01050004
010600         10  DL001-FILLER             PIC  X(50).                 01060011
010700                                                                  01070001
010800     05  DL001-FILLER                 PIC X(132).                 01080011
010900     05  DL001-SQLCA                  PIC X(138).                 01090001
011000 01  DL001-COMMAREA                   PIC X(01).                  01100001
011100 01  DL001-USER-PGM                   PIC X(08) VALUE 'DLKUP001'. 01110001
